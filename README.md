# Kafka Education Project

Продюсер создает сообщения и отправляет их в брокер kafka
Консьюмер принимет сообшения и вычисляет среднюю скорость за 2 сек и отправляет в WebSocket (ws) сервер
Пользователь открывает страницу в браузере, который подключается к ws-серверу и выводит текущий показатель скорости
обработки сообщений Консьюмером

Усложнение:
Сделать в браузере переключатель скорости (увеличение генерирования сообщений Продюсером) при манипулировании,
которым через http отправляются команды Продюсеру.

## Шаги по развертыванию проекта на локальной машине (Linux)

1. Клонировать проект из репозитория.
2. В папке проекта создать .env файл `сp .env.example .env`. И задать необходимые значения в переменных окружения в
   файле .env. Обратить внимание на соответствие значений WWWUSER, WWWGROUP с идентификатором и группой текущего
   пользователя хост машины.
3. Зайти в consumer, producer, web, wsserver и проделать операции п.2
4. В папке проекта из терминала запустить `docker-compose up -d`. Дождаться окончания сборки контейнеров.
5. Сборка автоматически запускает установку пакетов composer. Первый запуск может затребовать больше времени в связи с
   установкой пакетов.
6. Прописать в /etc/hosts алиас `10.100.115.25 kafka-ws.loc`, `10.100.115.15 kafka-web.loc` (по желанию)
7. Если все закончилось без ошибок, проект доступен по ссылке `http://10.100.115.15/` (`http://kafka-web.loc/`)

### Примечание 1

Распределение скорости выбрано эмпирическим путем, и может меняться в зависимости от компьютера. Распределение задается
временем простоя между генерированием набора сообщений в сервисе producer. Для изменения минимального и максимального
времени
простоя используются параметры `transmission.min_timeout` и `transmission.max_timeout` в
файле `producer/config/kafka.php`

### Источники

- https://ru.wikipedia.org/wiki/Apache_Kafka
- https://habr.com/ru/company/piter/blog/352978/
- https://habr.com/ru/company/piter/blog/536360/
- https://habr.com/ru/company/piter/blog/531434/
- https://www.baeldung.com/ops/kafka-docker-setup
- https://ru.wikipedia.org/wiki/WebSocket
- https://beyondco.de/docs/laravel-websockets/advanced-usage/app-providers
- https://github.com/beyondcode/laravel-websockets
